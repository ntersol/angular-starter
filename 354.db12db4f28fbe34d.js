"use strict";(self.webpackChunkangular_starter=self.webpackChunkangular_starter||[]).push([[354],{9354:(H,d,s)=>{s.r(d),s.d(d,{LoginModule:()=>j});var i=s(9808),v=s(8021),e=s(5e3),p=s(9783);function _(t,a){1&t&&e.GkF(0)}function T(t,a){if(1&t&&(e.TgZ(0,"div",8),e.Hsn(1,1),e.YNc(2,_,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutlet",n.headerTemplate)}}function C(t,a){1&t&&e.GkF(0)}function Z(t,a){if(1&t&&(e.TgZ(0,"div",9),e._uU(1),e.YNc(2,C,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.header," "),e.xp6(1),e.Q6J("ngTemplateOutlet",n.titleTemplate)}}function y(t,a){1&t&&e.GkF(0)}function w(t,a){if(1&t&&(e.TgZ(0,"div",10),e._uU(1),e.YNc(2,y,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.subheader," "),e.xp6(1),e.Q6J("ngTemplateOutlet",n.subtitleTemplate)}}function b(t,a){1&t&&e.GkF(0)}function x(t,a){1&t&&e.GkF(0)}function S(t,a){if(1&t&&(e.TgZ(0,"div",11),e.Hsn(1,2),e.YNc(2,x,1,0,"ng-container",6),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutlet",n.footerTemplate)}}const N=["*",[["p-header"]],[["p-footer"]]],I=["*","p-header","p-footer"];let M=(()=>{class t{constructor(n){this.el=n}ngAfterContentInit(){this.templates.forEach(n=>{switch(n.getType()){case"header":this.headerTemplate=n.template;break;case"title":this.titleTemplate=n.template;break;case"subtitle":this.subtitleTemplate=n.template;break;case"content":default:this.contentTemplate=n.template;break;case"footer":this.footerTemplate=n.template}})}getBlockableElement(){return this.el.nativeElement.children[0]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["p-card"]],contentQueries:function(n,o,c){if(1&n&&(e.Suo(c,p.h4,5),e.Suo(c,p.$_,5),e.Suo(c,p.jx,4)),2&n){let r;e.iGM(r=e.CRH())&&(o.headerFacet=r.first),e.iGM(r=e.CRH())&&(o.footerFacet=r.first),e.iGM(r=e.CRH())&&(o.templates=r)}},hostAttrs:[1,"p-element"],inputs:{header:"header",subheader:"subheader",style:"style",styleClass:"styleClass"},ngContentSelectors:I,decls:9,vars:9,consts:[[3,"ngClass","ngStyle"],["class","p-card-header",4,"ngIf"],[1,"p-card-body"],["class","p-card-title",4,"ngIf"],["class","p-card-subtitle",4,"ngIf"],[1,"p-card-content"],[4,"ngTemplateOutlet"],["class","p-card-footer",4,"ngIf"],[1,"p-card-header"],[1,"p-card-title"],[1,"p-card-subtitle"],[1,"p-card-footer"]],template:function(n,o){1&n&&(e.F$t(N),e.TgZ(0,"div",0),e.YNc(1,T,3,1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Z,3,2,"div",3),e.YNc(4,w,3,2,"div",4),e.TgZ(5,"div",5),e.Hsn(6),e.YNc(7,b,1,0,"ng-container",6),e.qZA(),e.YNc(8,S,3,1,"div",7),e.qZA(),e.qZA()),2&n&&(e.Tol(o.styleClass),e.Q6J("ngClass","p-card p-component")("ngStyle",o.style),e.xp6(1),e.Q6J("ngIf",o.headerFacet||o.headerTemplate),e.xp6(2),e.Q6J("ngIf",o.header||o.titleTemplate),e.xp6(1),e.Q6J("ngIf",o.subheader||o.subtitleTemplate),e.xp6(3),e.Q6J("ngTemplateOutlet",o.contentTemplate),e.xp6(1),e.Q6J("ngIf",o.footerFacet||o.footerTemplate))},directives:[i.mk,i.PC,i.O5,i.tP],styles:[".p-card-header img{width:100%}\n"],encapsulation:2,changeDetection:0}),t})(),A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[i.ez],p.m8]}),t})();var g=s(3724),u=s(4404),l=s(2382),f=s(8596),U=s(4298);let J=(()=>{class t{constructor(n){this._doc=n,this.isNode="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,this.isBrowser=!this.isNode,this._localStorage={setItem:(o,c)=>{},getItem:o=>null,removeItem:o=>{},clear:()=>{},key:o=>null,length:0}}get window(){return this.isBrowser?window:this._doc.defaultView}get document(){return this.isBrowser?document:this._doc}get location(){return this.isBrowser?document.location:this._doc.location}get localStorage(){return this.isBrowser?window.localStorage:this._localStorage}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(i.K0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Y=s(3734),Q=s(9444),L=s(8659);function F(t,a){1&t&&e._UZ(0,"p-message",19)}function q(t,a){1&t&&e._UZ(0,"p-message",20)}function k(t,a){if(1&t&&(e.ynx(0),e.YNc(1,F,1,0,"p-message",17),e.YNc(2,q,1,0,"p-message",18),e.BQk()),2&t){const n=a.ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",n===o.authState.sessionExpired),e.xp6(1),e.Q6J("ngIf",n===o.authState.loggedOut)}}function O(t,a){1&t&&e._UZ(0,"p-message",21)}const h=function(t){return{"p-focus":t}},B=function(t){return{"btn-waiting":t}},m="savedUserName",G=u.Bz.forChild([{path:"",component:(()=>{class t{constructor(n,o,c,r,z,E){this.authService=n,this.route=o,this.router=c,this.fb=r,this.settings=z,this.dom=E,this.formMain=this.fb.group({userName:["juser",[l.kI.required]],password:["password",[l.kI.required]],remember:[null]}),this.showErrorDetails=!1,this.authState$=this.authService.authState$,this.authState=f.j,this.showPassword=!1}ngOnInit(){var n;const o=null===(n=this.dom.localStorage)||void 0===n?void 0:n.getItem(m);o&&this.formMain.patchValue({userName:o,remember:!0}),this.authService.logOutModal=null}onLogin(){var n;this.waiting=!0,this.errorApi=null,this.showErrorDetails=!1,this.formMain&&this.formMain.value.remember?null===(n=this.dom.localStorage)||void 0===n||n.setItem(m,this.formMain.value.userName):this.dom.localStorage.removeItem(m),this.authService.logIn(this.formMain.value).subscribe(()=>{this.settings.userName=this.formMain.value.userName,this.router.navigate([this.route.snapshot.queryParams.returnUrl||"/"]),this.waiting=!1},o=>{o.errorMsg="Error logging in.",(o.statusText="Unauthorized")&&(o.errorMsg="Invalid username or password, please try again.",this.showErrorDetails=!1),this.errorApi=o,this.waiting=!1})}ngOnDestroy(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f.e),e.Y36(u.gz),e.Y36(u.F0),e.Y36(l.qu),e.Y36(U.g),e.Y36(J))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:30,vars:15,consts:[[1,"container","mt-5"],[1,"m-auto",2,"max-width","480px"],["novalidate","",3,"formGroup","ngSubmit"],["icon","user"],[4,"ngIf"],["severity","error","text","Unable to log in, please check your username and password",4,"ngIf"],[1,"mb-4"],[1,"p-float-label","mb-4",3,"ngClass"],["id","userName","type","text","size","30","pInputText","","formControlName","userName",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","userName"],["id","password","type","password","size","30","pInputText","","formControlName","password",1,"w-100","p-inputtext","p-corner-all","p-state-default","p-widget"],["for","password"],[1,"form-check-label"],["type","checkbox","formControlName","remember",1,"form-check-input","remember"],[1,"text-end"],["type","submit",1,"btn","btn-primary",3,"disabled","ngClass"],["icon","power-off",1,"me-2"],["severity","warn","styleClass","w-100 mb-3","text","Session expired, please log in again",4,"ngIf"],["severity","success","styleClass","w-100 mb-3","text","You have successfully logged out",4,"ngIf"],["severity","warn","styleClass","w-100 mb-3","text","Session expired, please log in again"],["severity","success","styleClass","w-100 mb-3","text","You have successfully logged out"],["severity","error","text","Unable to log in, please check your username and password"]],template:function(n,o){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return o.onLogin()}),e.TgZ(4,"h1"),e._UZ(5,"fa-icon",3),e._uU(6," Please sign in"),e.qZA(),e.TgZ(7,"p-card"),e.YNc(8,k,3,2,"ng-container",4),e.ALo(9,"async"),e.YNc(10,O,1,0,"p-message",5),e.TgZ(11,"p",6),e._uU(12,"Please enter your username and password."),e.qZA(),e.TgZ(13,"p",7),e._UZ(14,"input",8),e.TgZ(15,"label",9),e._uU(16,"Username"),e.qZA(),e.qZA(),e.TgZ(17,"p",7),e._UZ(18,"input",10),e.TgZ(19,"label",11),e._uU(20,"Password"),e.qZA(),e.qZA(),e.TgZ(21,"label",12),e._UZ(22,"input",13),e._uU(23," Remember my username "),e.qZA(),e.TgZ(24,"p-footer"),e.TgZ(25,"div",14),e.TgZ(26,"button",15),e._UZ(27,"fa-icon",16),e._uU(28," Sign In "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(29,"app-footer")),2&n){let c,r;e.xp6(3),e.Q6J("formGroup",o.formMain),e.xp6(5),e.Q6J("ngIf",e.lcZ(9,7,o.authState$)),e.xp6(2),e.Q6J("ngIf",o.errorApi),e.xp6(3),e.Q6J("ngClass",e.VKq(9,h,!(null==o.formMain||null==(c=o.formMain.get("userName"))||!c.value))),e.xp6(4),e.Q6J("ngClass",e.VKq(11,h,!(null==o.formMain||null==(r=o.formMain.get("userName"))||!r.value))),e.xp6(9),e.Q6J("disabled",o.formMain.invalid||o.waiting)("ngClass",e.VKq(13,B,o.waiting))}},directives:[Y.G,l._Y,l.JL,l.sg,Q.BN,M,i.O5,g.q,i.mk,l.Fj,l.JJ,l.u,l.Wl,p.$_,L.c],pipes:[i.Ov],encapsulation:2}),t})(),data:{title:"Home"}}]);let j=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[],imports:[[i.ez,v.U,A,g.O,G]]}),t})()}}]);