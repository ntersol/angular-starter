"use strict";(self.webpackChunkangular_starter=self.webpackChunkangular_starter||[]).push([[179],{4495:(T,E,n)=>{n.d(E,{g:()=>M});var m=n(508),r=n(5963),C=n(4004),c=n(2223),p=n(8427),I=n(9757),S=n(4755);let M=(()=>{class h{constructor(v,F){this.ref=v,this.config=F,this.logoutTimer$=(0,r.H)(0,1e3).pipe((0,C.U)(O=>(this.config.data||60)-O)),this.logoutTimer$.pipe((0,m.sL)()).subscribe(O=>{O<=0&&this.logout()})}ngOnInit(){}logout(){this.ref.close(!0)}ngOnDestroy(){}}return h.\u0275fac=function(v){return new(v||h)(c.Y36(p.E7),c.Y36(p.S))},h.\u0275cmp=c.Xpm({type:h,selectors:[["app-logout-modal"]],decls:9,vars:3,consts:[["id","the_time"],[1,"p-dialog-footer","p-widget-content","ng-tns-c7-3","ng-star-inserted"],["type","button","pButton","","aria-label","Close","icon","fas fa-power-off","label","Log Out",1,"float-start","pull-left",3,"click"],["type","button","pButton","","icon","fas fa-angle-double-right","iconPos","right","label","Continue Working",3,"click"]],template:function(v,F){1&v&&(c.TgZ(0,"p"),c._uU(1," Your session is about to expire in "),c.TgZ(2,"span",0),c._uU(3),c.ALo(4,"async"),c.qZA(),c._uU(5," seconds, do you want to continue working?\n"),c.qZA(),c.TgZ(6,"div",1)(7,"button",2),c.NdJ("click",function(){return F.logout()}),c.qZA(),c.TgZ(8,"button",3),c.NdJ("click",function(){return F.ref.close()}),c.qZA()()),2&v&&(c.xp6(3),c.Oqu(c.lcZ(4,1,F.logoutTimer$)))},dependencies:[I.Hq,S.Ov],encapsulation:2}),h})()},8797:(T,E,n)=>{n.d(E,{sM:()=>nt,uh:()=>Z,e8:()=>q,jq:()=>f,L6:()=>ht,pV:()=>gt,m8:()=>U,Cm:()=>et,JU:()=>rt,jU:()=>L,UG:()=>j,Z1:()=>tt});var m=n(4755),r=n(2223);n(9920);var h=n(6550),B=n(9621),N=n(3254),a=n(8427);const A=[B.Bz,N.D,a.DL];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[m.uU,m.H9],imports:[m.ez,A,B.Bz,N.D,a.DL]}),e})();const j=typeof process<"u"&&null!=process.versions&&null!=process.versions.node,L=!j;var y=n(967);const tt=e=>e+` | ${y.N.properties.appName}`;class et extends B.sz{serialize(o){return this._withTrailingSlash(super.serialize(o))}_withTrailingSlash(o){const t=o.indexOf("?")>-1?"?":"#",s=o.split(t);return s[0].endsWith("/")||-1===o.substring(o.lastIndexOf("/")+1).indexOf(".")&&(s[0]+="/"),s.join(t)}}var K=n(4699),R=n(3144);let nt=(()=>{class e{constructor(t){this.http=t,this.store=(0,K.W_)(this.http),this.users=this.store({uniqueId:"id",apiUrl:"https://jsonplaceholder.typicode.com/users"})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(R.eN))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ot=n(387),z=n(7876);let rt=(()=>{class e{constructor(t,s){this.confirmationService=t,this.dom=s,this.uiStore=(0,K.$I)({},{persistId:"globalUIStore"})}updateAppModal(){this.confirmationService.confirm({message:"An update for this application is available, would you like to update?",header:"Confirmation",accept:()=>this.dom?.document?.location.reload()})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ot.YP),r.LFG(z.vo))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var st=n(1135),X=n(6451),H=n(4968),it=n(7445),b=n(8675),Q=n(9468),at=n(3900),w=n(4004),lt=n(1884),k=n(9300),Y=n(8505),ut=n(5698),ct=n(4495);let Z=(()=>{class e extends z.V1{set token(t){this.localStorage.setItem("token",t)}get token(){return this.localStorage.getItem("token")}get user(){return this.localStorage.getItem("user",{isJson:!0})}set user(t){this.localStorage.setItem("user",t)}constructor(){super(),this.token$=this.localStorage.getItem$("token"),this.user$=this.localStorage.getItem$("user",{isJson:!0})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=(()=>((f=f||{})[f.initial=0]="initial",f[f.loggedIn=1]="loggedIn",f[f.loggedOut=2]="loggedOut",f[f.sessionExpired=3]="sessionExpired",f))();let q=(()=>{class e{constructor(t,s,i,u,P,l){this.http=t,this.router=s,this.route=i,this.appStorage=u,this.dialogService=P,this.dom=l,this.authState$=new st.X(f.initial),this.tokenRefreshInterval=60,this.idleDuration=300,this.logoutModalDuration=60,this.logoutModalVisible=!1,this.userActions$=this.dom.isBrowser&&this.dom.document?(0,X.T)((0,H.R)(document,"keypress"),(0,H.R)(document,"mousemove"),(0,H.R)(document,"click"),(0,H.R)(this.dom.document,"scroll")):(0,X.T)(),this.refreshEvent$=this.userActions$.pipe((0,b.O)(0),(0,Q.p)(1e3,void 0,{leading:!1,trailing:!0})),this.logoutTimerExpired$=this.refreshEvent$.pipe((0,at.w)(()=>(0,it.F)(1e3)),(0,w.U)(d=>d>this.idleDuration),(0,b.O)(!1),(0,lt.x)(),(0,k.h)(d=>!!this.appStorage.token&&d&&!this.logoutModalVisible),(0,Y.b)(()=>this.launchLogoutModal())),this.refreshToken$=this.refreshEvent$.pipe((0,Q.p)(1e3*this.tokenRefreshInterval,void 0,{leading:!1,trailing:!0}),(0,k.h)(d=>!!d&&!!this.appStorage.token&&!this.logoutModalVisible),(0,Y.b)(()=>this.refreshToken())),this.route.queryParams.pipe((0,ut.q)(1)).subscribe(d=>{d.token&&(this.appStorage.token=d.token)})}logIn(t){return(y.N.endpoints.apiUrl&&y.N.endpoints.authLogin?this.http.post(y.N.endpoints.apiUrl+y.N.endpoints.authLogin,t):this.http.get("assets/mock-data/login.json")).pipe((0,Y.b)(i=>{this.appStorage.token=i.data.token,this.authState$.next(f.loggedIn),i.data.expirationSeconds&&(this.idleDuration=i.data.expirationSeconds)}))}refreshToken(){const t=y.N.endpoints.apiUrl&&y.N.endpoints.authTokenRefresh?this.http.post(y.N.endpoints.apiUrl+y.N.endpoints.authTokenRefresh,{}):this.http.post("https://jsonplaceholder.typicode.com/posts/",{}).pipe((0,w.U)(()=>({data:{token:"12345",userGuid:"12345"},success:!0,meta:{}})));return t.subscribe(s=>{this.appStorage.token&&(this.authState$.next(f.loggedIn),this.appStorage.token=s.data.token)},()=>this.logOut(f.sessionExpired)),t}launchLogoutModal(){this.logoutModalVisible=!0,this.dialogService.open(ct.g,{data:this.logoutModalDuration,header:"Warning",width:"70%",dismissableMask:!0}).onClose.subscribe(s=>{s?this.logOut(f.loggedOut):this.refreshToken(),this.logoutModalVisible=!1})}logOut(t){this.appStorage.token=null,this.logoutModalVisible=!1,this.authState$.next(t);const s="/"!==this.router.url&&"/login"!==this.router.url?this.router.url.split("?")[0]:null;this.router.navigate(["/login"],{queryParams:{returnUrl:s}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(R.eN),r.LFG(B.F0),r.LFG(B.gz),r.LFG(Z),r.LFG(a.xA),r.LFG(z.vo))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ht=(()=>{class e{constructor(t){this.dom=t}handleError(t){throw L&&!t.errorMsg&&!t.hasOwnProperty("status")&&y.N.production&&(y.N.endpoints.errorPath&&this.logError(t),this.resetState(t)),L||console.error(t),t}resetState(t){L&&(console.error({error:t}),this.dom?.localStorage?.clear(),this.dom?.sessionStorage?.clear())}logError(t){if(!y.N.endpoints.apiUrl||!y.N.endpoints.errorPath)return;const s=new XMLHttpRequest,u={level:"Error",class:"",message:t.message,exception:t.stack};s.open("POST",y.N.endpoints.apiUrl+y.N.endpoints.errorPath,!0),s.setRequestHeader("Content-type","application/json;charset=UTF-8"),s.send(JSON.stringify(u))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(z.vo))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();var pt=n(9646),dt=n(2843),ft=n(262);let gt=(()=>{class e{constructor(t,s,i){this.appStorage=t,this.auth=s,this.transferState=i}intercept(t,s){if(!j&&"GET"===t.method){const l=(0,h.Cb)(t.url),d=this.transferState.get(l,null);if(d)return(0,pt.of)(new R.Zn({body:d,status:200}))}const i={};this.appStorage.token&&(i.Authorization="Bearer "+this.appStorage.token);const u=new R.WM(i);return s.handle(t.clone({headers:u})).pipe((0,Y.b)(l=>{j&&l instanceof R.Zn&&(200===l.status||202===l.status)&&this.transferState.set((0,h.Cb)(t.url),l.body)}),(0,ft.K)(l=>((401===l.status||403===l.status)&&this.sessionEnd(),(0,dt._)(l))))}sessionEnd(){this.auth.logOut(f.sessionExpired)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Z),r.LFG(q),r.LFG(h.ki))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();var _;!function(e){let o;var t;(t=o=e.Color||(e.Color={}))[t.red=0]="red",t[t.blue=1]="blue",t[t.orange=2]="orange"}(_||(_={}))},9920:(T,E,n)=>{n.d(E,{X:()=>r});var m=n(2223);let r=(()=>{class C{transform(p,I=!1){if(!p||""===p)return p;let h,g,v,S=p.replace(/[^0-9]/g,""),M=!1;if("1"===S.charAt(0)&&11===S.length&&(M=!0,S=S.slice(1)),I)return S;switch(S.length){case 1:case 2:case 3:h=S;break;default:h=S.slice(0,3),g=S.slice(3)}return g?(g.length>3&&(g=g.slice(0,3)+"-"+g.slice(3,7)),v=("("+h+") "+g).trim().slice(0,14)):v="("+h,M?"1 "+v:v}}return C.\u0275fac=function(p){return new(p||C)},C.\u0275pipe=m.Yjl({name:"phoneNumber",type:C,pure:!0}),C})()},967:(T,E,n)=>{n.d(E,{N:()=>C});const C=(0,n(6811).BPw)({appID:"angular-starter",production:!1,properties:{appName:"Angular Starter"},settings:{enableServiceWorker:!0,enableAppComms:!0,preloadRoutes:!1,obfuscate:!0},domains:{listenTo:["http://localhost:4200"]},endpoints:{envConfig:"http://localhost:4200/assets/mock-data/env-settings.json",apiUrl:null,authLogin:"http://localhost:4200/assets/mock-data/login.json",authTokenRefresh:null,versionPath:null,errorPath:null},state:{uiStoreBlacklist:[]},licenses:{vapid:{publicKey:"BIZ-IPJrxKxtdL9O9CnK42-XWcepJDPMQDfj8pb_vCfQxa7j1LoC4exdzZ5MhPWaF_5eWPglkj3V32xRswQEm6Q",privateKey:"jUOTBXqGGwElft-fTVBYb1BeLWrRhn2HgyJpXZBhgLo"},agGrid:"qwerty"}},{prod:!0})},2855:(T,E,n)=>{var m=n(6550),r=n(2223),C=n(3144),c=n(4275),p=n(9621),I=n(387),S=n(8427),M=n(967),h=n(8797),g=n(508),v=n(7876);let F=(()=>{class a{constructor(A,U){this.auth=A,this.dom=U,this.dom.isBrowser&&(this.auth.logoutTimerExpired$.pipe((0,g.sL)()).subscribe(),this.auth.refreshToken$.pipe((0,g.sL)()).subscribe())}ngOnInit(){}ngOnDestroy(){}}return a.\u0275fac=function(A){return new(A||a)(r.Y36(h.e8),r.Y36(v.vo))},a.\u0275cmp=r.Xpm({type:a,selectors:[["app-root"]],decls:1,vars:0,template:function(A,U){1&A&&r._UZ(0,"router-outlet")},dependencies:[p.lC],encapsulation:2}),a})();const O=[{path:"users",loadChildren:()=>Promise.all([n.e(354),n.e(874),n.e(30),n.e(592),n.e(547)]).then(n.bind(n,5547)).then(a=>a.UsersModule)},{path:"login",pathMatch:"full",loadChildren:()=>Promise.all([n.e(354),n.e(874),n.e(30),n.e(592),n.e(921)]).then(n.bind(n,5921)).then(a=>a.LoginModule),title:(0,h.Z1)("Please Log In")},{path:"",pathMatch:"full",loadChildren:()=>Promise.all([n.e(354),n.e(874),n.e(592),n.e(262)]).then(n.bind(n,8262)).then(a=>a.HomeModule)},{path:"**",loadChildren:()=>Promise.all([n.e(354),n.e(874),n.e(592),n.e(103)]).then(n.bind(n,4103)).then(a=>a.NoContentModule),title:(0,h.Z1)("Page Not Found")}];let V=(()=>{class a{}return a.\u0275fac=function(A){return new(A||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[p.Bz.forRoot(O,{useHash:!1,preloadingStrategy:M.N.settings.preloadRoutes?p.wm:p.GZ,scrollPositionRestoration:"enabled",initialNavigation:"enabledBlocking"}),p.Bz]}),a})();const W=p.Bz.forChild([{path:"~",loadChildren:()=>Promise.all([n.e(354),n.e(874)]).then(n.bind(n,5337)).then(a=>a.MasterPageModule)},{path:"~",loadChildren:()=>n.e(354).then(n.bind(n,5354)).then(a=>a.IconsComponent)},{path:"~",loadChildren:()=>n.e(30).then(n.bind(n,5030)).then(a=>a.FormsModule)},{path:"~",loadChildren:()=>n.e(30).then(n.bind(n,5030)).then(a=>a.ReactiveFormsModule)},{path:"~",loadChildren:()=>n.e(592).then(n.bind(n,266)).then(a=>a.CardModule)},{path:"~",loadChildren:()=>n.e(793).then(n.bind(n,793)).then(a=>a.MessagesModule)},{path:"~",loadChildren:()=>Promise.all([n.e(30),n.e(227),n.e(592),n.e(844)]).then(n.bind(n,3844)).then(a=>a.TableModule)},{path:"~",loadChildren:()=>Promise.all([n.e(227),n.e(98)]).then(n.bind(n,4098)).then(a=>a.TreeModule)}]);M.N.production&&(0,r.G48)();let B,N=(()=>{class a{constructor(A){this.injector=A,B=this.injector}}return a.\u0275fac=function(A){return new(A||a)(r.LFG(r.zs3))},a.\u0275mod=r.oAB({type:a,bootstrap:[F]}),a.\u0275inj=r.cJS({providers:[(0,m.ly)(),I.YP,S.xA,{provide:p.Hx,useClass:h.Cm},{provide:r.qLn,useClass:h.L6},h.pV,{provide:C.TP,useClass:h.pV,multi:!0}],imports:[m.b2.withServerTransition({appId:M.N.appID}),C.JF,c.PW,W,V]}),a})();M.N.production&&(0,r.G48)(),m.q6().bootstrapModule(N).catch(a=>console.log(a))}},T=>{T.O(0,[736],()=>T(T.s=2855)),T.O()}]);